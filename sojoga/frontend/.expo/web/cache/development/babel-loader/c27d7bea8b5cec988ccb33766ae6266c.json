{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport axios from \"axios\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useEffect } from 'react';\nvar api = axios.create({\n  baseURL: \"http://192.168.15.4:8000/api\",\n  headers: {\n    'Content-Type': 'application/json',\n    Accept: 'application/json'\n  }\n});\nuseEffect(function () {\n  function handleUserNextScreen() {\n    return _handleUserNextScreen.apply(this, arguments);\n  }\n  function _handleUserNextScreen() {\n    _handleUserNextScreen = _asyncToGenerator(function* () {\n      var token = yield AsyncStorage.getItem('@token');\n      api.interceptors.request.use(function () {\n        var _ref = _asyncToGenerator(function* (config) {\n          var token = getData;\n          if (token) {\n            api.defaults.headers.authorization = \"Bearer \" + token;\n          }\n          return config;\n        });\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    });\n    return _handleUserNextScreen.apply(this, arguments);\n  }\n  handleUserNextScreen();\n}, []);\nexport default api;","map":{"version":3,"names":["axios","AsyncStorage","useEffect","api","create","baseURL","headers","Accept","handleUserNextScreen","token","getItem","interceptors","request","use","config","getData","defaults","authorization"],"sources":["/app/src/services/api.jsx"],"sourcesContent":["import axios from \"axios\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport {useEffect} from 'react';\n\nconst api = axios.create({\n  baseURL: \"http://192.168.15.4:8000/api\",\n  headers: {\n    'Content-Type': 'application/json',\n    Accept: 'application/json',\n  },\n});\n\n// const token = await AsyncStorage.getItem('@token')\n\n// const getData = async () => {\n//   try {\n//     const token = await AsyncStorage.getItem('@token')\n//     console.error(token)\n//   } catch(e) {\n//     // error reading value\n//   }\n// }\n\n// console.error(getData)\n\nuseEffect(() => {\n  async function handleUserNextScreen() {\n    const token = await AsyncStorage.getItem('@token');\n\n    api.interceptors.request.use(async config => {\n      // Declaramos um token manualmente para teste.\n      const token = getData;\n    \n      if (token) {\n        api.defaults.headers.authorization = `Bearer ${token}`;\n      }\n    \n      return config;\n    });\n    \n  }\n\n  handleUserNextScreen();\n}, []);\n\n\n\n\n\nexport default api;"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,YAAY,MAAM,2CAA2C;AACpE,SAAQC,SAAS,QAAO,OAAO;AAE/B,IAAMC,GAAG,GAAGH,KAAK,CAACI,MAAM,CAAC;EACvBC,OAAO,EAAE,8BAA8B;EACvCC,OAAO,EAAE;IACP,cAAc,EAAE,kBAAkB;IAClCC,MAAM,EAAE;EACV;AACF,CAAC,CAAC;AAeFL,SAAS,CAAC,YAAM;EAAA,SACCM,oBAAoB;IAAA;EAAA;EAAA;IAAA,0CAAnC,aAAsC;MACpC,IAAMC,KAAK,SAASR,YAAY,CAACS,OAAO,CAAC,QAAQ,CAAC;MAElDP,GAAG,CAACQ,YAAY,CAACC,OAAO,CAACC,GAAG;QAAA,6BAAC,WAAMC,MAAM,EAAI;UAE3C,IAAML,KAAK,GAAGM,OAAO;UAErB,IAAIN,KAAK,EAAE;YACTN,GAAG,CAACa,QAAQ,CAACV,OAAO,CAACW,aAAa,eAAaR,KAAO;UACxD;UAEA,OAAOK,MAAM;QACf,CAAC;QAAA;UAAA;QAAA;MAAA,IAAC;IAEJ,CAAC;IAAA;EAAA;EAEDN,oBAAoB,EAAE;AACxB,CAAC,EAAE,EAAE,CAAC;AAMN,eAAeL,GAAG"},"metadata":{},"sourceType":"module"}